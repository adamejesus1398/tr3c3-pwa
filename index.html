<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TR3C3">
    <meta name="theme-color" content="#f5c400">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-512.png">
    <title>TR3C3 OS</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Serif+Display:ital@0;1&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #000000;
            --bg2: #0a0a0a;
            --card: #111111;
            --card2: #161616;
            --border: #1c1c1c;
            --border2: #2a2a2a;
            --white: #f5f0e8;
            --muted: #666666;
            --muted2: #333333;
            --gold: #f5c400;
            --gold2: #ffd740;
            --green: #5aaa7a;
            --red: #e74c3c;
            --nav-h: 72px;
            --sat: env(safe-area-inset-top, 44px);
            --sab: env(safe-area-inset-bottom, 34px);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg);
            color: var(--white);
            font-family: 'DM Sans', sans-serif;
            font-size: 16px;
            overscroll-behavior-y: none;
            -webkit-font-smoothing: antialiased;
        }

        #app {
            height: 100dvh;
            max-width: 430px;
            margin: 0 auto;
            overflow: hidden;
            position: relative;
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: calc(var(--nav-h) + var(--sab) + 12px);
            background: var(--bg);
            display: none;
            z-index: 10;
            padding-top: calc(var(--sat) + 20px);
        }

        .screen.active {
            display: block;
        }

        /* TYPOGRAPHY */
        h1,
        h2,
        h3,
        .bebas {
            font-family: 'Bebas Neue', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .serif-italic {
            font-family: 'DM Serif Display', serif;
            font-style: italic;
        }

        /* COMPONENTS */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
            margin: 8px 14px;
        }

        .card-title {
            font-family: 'Bebas Neue';
            color: var(--muted);
            font-size: 13px;
            letter-spacing: 1.5px;
            margin-bottom: 12px;
        }

        .btn {
            background: var(--gold);
            color: #000;
            font-family: 'Bebas Neue';
            font-size: 14px;
            letter-spacing: 2px;
            border-radius: 12px;
            padding: 13px 18px;
            width: 100%;
            border: none;
            outline: none;
            text-align: center;
            cursor: pointer;
        }

        .btn:active {
            transform: scale(0.98);
            opacity: 0.9;
        }

        .inp,
        textarea.inp {
            background: var(--bg2);
            border: 1px solid var(--border2);
            border-radius: 10px;
            padding: 12px 14px;
            color: var(--white);
            font-family: 'DM Sans', sans-serif;
            font-size: 15px;
            width: 100%;
            outline: none;
            -webkit-appearance: none;
            display: block;
        }

        .inp:focus {
            border-color: var(--gold);
        }

        .cpill {
            border: 1px solid var(--border2);
            border-radius: 20px;
            padding: 6px 13px;
            font-size: 9px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--muted);
            background: none;
            cursor: pointer;
            white-space: nowrap;
        }

        .cpill.active {
            background: var(--gold);
            color: #000;
            border-color: var(--gold);
            font-weight: bold;
        }

        /* NAVIGATION */
        nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 430px;
            background: rgba(0, 0, 0, 0.97);
            backdrop-filter: blur(28px);
            -webkit-backdrop-filter: blur(28px);
            border-top: 1px solid rgba(245, 196, 0, .15);
            display: flex;
            align-items: flex-start;
            justify-content: space-around;
            z-index: 200;
            padding-top: 10px;
            padding-bottom: calc(var(--sab) + 4px);
            height: calc(var(--nav-h) + var(--sab));
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            border: none;
            background: none;
            cursor: pointer;
            flex: 1;
            outline: none;
            padding: 0;
        }

        .nav-icon {
            font-size: 17px;
            transition: transform .2s;
        }

        .nav-lbl {
            font-size: 7px;
            letter-spacing: .8px;
            text-transform: uppercase;
            color: var(--muted);
        }

        .nav-btn.active .nav-lbl {
            color: var(--gold);
        }

        .nav-btn.active .nav-icon {
            transform: translateY(-2px);
        }

        /* HEADER & HERO */
        .page-header {
            padding: 0 24px 20px;
        }

        .page-tag {
            font-size: 11px;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--gold);
            font-weight: 500;
            margin-bottom: 4px;
        }

        .page-title {
            font-family: 'Bebas Neue';
            font-size: 42px;
            line-height: 0.9;
            color: var(--white);
        }

        .page-sub {
            font-family: 'DM Serif Display';
            font-style: italic;
            color: var(--muted);
            margin-top: 8px;
            font-size: 15px;
        }

        /* FINANZAS */
        .fin-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 8px 14px;
        }

        .fin-wide {
            grid-column: span 2;
        }

        .fin-box {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
        }

        .fin-box-lbl {
            font-size: 10px;
            text-transform: uppercase;
            color: var(--muted);
            letter-spacing: 1px;
            margin-bottom: 6px;
        }

        .fin-box-val {
            font-family: 'Bebas Neue';
            font-size: 24px;
            color: var(--white);
            margin-bottom: 4px;
        }

        .prog-bar {
            height: 6px;
            background: var(--border2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 6px;
        }

        .prog-fill {
            height: 100%;
            background: var(--gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        .prog-label {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: var(--muted);
        }

        .cat-pills {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 12px;
        }

        .mentor-tip {
            background: var(--card2);
            border-left: 2px solid var(--gold);
            padding: 12px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 8px;
        }

        .mentor-tip-src {
            font-size: 9px;
            text-transform: uppercase;
            color: var(--gold);
            letter-spacing: 1px;
            margin-bottom: 4px;
        }

        .mentor-tip-text {
            font-family: 'DM Serif Display';
            font-style: italic;
            color: var(--white);
            font-size: 14px;
            line-height: 1.4;
        }

        /* DIARIO */
        .obj-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border2);
        }

        .obj-item:last-child {
            border-bottom: none;
        }

        .obj-chk {
            width: 22px;
            height: 22px;
            border-radius: 6px;
            border: 2px solid var(--border2);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .obj-item.done .obj-chk {
            background: var(--gold);
            border-color: var(--gold);
            color: #000;
        }

        .obj-item.done .obj-chk::after {
            content: '‚úì';
            font-weight: bold;
        }

        .obj-text {
            font-size: 14px;
            color: var(--white);
        }

        .obj-item.done .obj-text {
            text-decoration: line-through;
            color: var(--muted);
        }

        /* RUTINA BLOCKS */
        .rblock {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin: 8px 14px;
            overflow: hidden;
        }

        .rblock-hdr {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(245, 196, 0, 0.04);
            cursor: pointer;
        }

        .rblock-emoji {
            font-size: 20px;
        }

        .rblock-title {
            font-family: 'Bebas Neue';
            color: var(--gold);
            letter-spacing: 1px;
            font-size: 18px;
        }

        .rblock-time {
            font-size: 11px;
            color: var(--muted);
            margin-top: 2px;
        }

        .rblock-arrow {
            transition: transform 0.3s;
            color: var(--gold);
            font-size: 12px;
        }

        .rblock.open .rblock-arrow {
            transform: rotate(180deg);
        }

        .rblock-body {
            display: none;
            padding: 0 16px 16px;
            border-top: 1px solid var(--border2);
        }

        .rblock.open .rblock-body {
            display: block;
        }

        .rstep {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border2);
        }

        .rstep:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .rstep-num {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--border2);
            color: var(--muted);
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-top: 2px;
        }

        .rstep-name {
            font-size: 15px;
            color: var(--white);
            font-weight: 500;
            margin-bottom: 2px;
        }

        .rstep-dur {
            font-size: 12px;
            color: var(--muted);
        }

        /* ROADMAP PHASES */
        .rphase {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin: 8px 14px;
            overflow: hidden;
        }

        .rphase-hdr {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px;
            cursor: pointer;
        }

        .rphase-arrow {
            transition: transform 0.3s;
            color: var(--gold);
            font-size: 12px;
        }

        .rphase.open .rphase-arrow {
            transform: rotate(180deg);
        }

        .rphase-body {
            display: none;
            padding: 0 16px 20px;
            border-top: 1px solid var(--border2);
        }

        .rphase.open .rphase-body {
            display: block;
        }

        .ptask {
            display: flex;
            gap: 12px;
            margin-bottom: 14px;
        }

        .ptask:last-child {
            margin-bottom: 0;
        }

        .ptask-day {
            font-family: 'Bebas Neue';
            color: var(--gold);
            font-size: 14px;
            width: 35px;
            flex-shrink: 0;
            padding-top: 3px;
        }

        .ptask-name {
            font-size: 14px;
            color: var(--white);
            font-weight: 500;
            margin-bottom: 2px;
        }

        .ptask-desc {
            font-size: 12px;
            color: var(--muted);
            line-height: 1.4;
        }
    </style>
</head>

<body>

    <div id="app">

        <!-- ================= SECCI√ìN 1: INICIO ================= -->
        <div class="screen active" id="s-home">
            <div class="page-header"
                style="display:flex;justify-content:space-between;align-items:center;padding-top:calc(var(--sat) + 20px);">
                <!-- T - blanco -->
                <svg width="100" height="28" viewBox="0 0 110 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <line x1="2" y1="4" x2="16" y2="4" stroke="#f5f0e8" stroke-width="2.8" stroke-linecap="square" />
                    <line x1="9" y1="4" x2="9" y2="26" stroke="#f5f0e8" stroke-width="2.8" stroke-linecap="square" />
                    <line x1="22" y1="4" x2="22" y2="26" stroke="#f5f0e8" stroke-width="2.8" stroke-linecap="square" />
                    <path d="M22 4 L31 4 L31 14 L22 14" stroke="#f5f0e8" stroke-width="2.8" fill="none"
                        stroke-linecap="square" stroke-linejoin="miter" />
                    <line x1="28" y1="14" x2="33" y2="26" stroke="#f5f0e8" stroke-width="2.8" stroke-linecap="square" />
                    <path d="M40 4 L51 4 L51 14 L40 14" stroke="#f5c400" stroke-width="2.8" fill="none"
                        stroke-linecap="square" stroke-linejoin="miter" />
                    <path d="M40 26 L51 26 L51 14" stroke="#f5c400" stroke-width="2.8" fill="none"
                        stroke-linecap="square" stroke-linejoin="miter" />
                    <path d="M62 4 L58 4 Q57 4 57 5 L57 25 Q57 26 58 26 L62 26" stroke="#f5f0e8" stroke-width="2.8"
                        fill="none" stroke-linecap="square" stroke-linejoin="miter" />
                    <path d="M69 4 L80 4 L80 14 L69 14" stroke="#f5c400" stroke-width="2.8" fill="none"
                        stroke-linecap="square" stroke-linejoin="miter" />
                    <path d="M69 26 L80 26 L80 14" stroke="#f5c400" stroke-width="2.8" fill="none"
                        stroke-linecap="square" stroke-linejoin="miter" />
                </svg>
                <div style="font-size:11px;letter-spacing:1px;text-transform:uppercase;color:var(--muted);font-weight:500;"
                    id="h-date">JUE 13 FEB</div>
            </div>

            <div style="padding: 0 24px;">
                <div style="font-size:13px;color:var(--gold);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px;"
                    id="h-greet">BUENAS TARDES</div>
                <div class="page-title">HOLA,<br><span style="color:var(--gold)">GUERRERO</span></div>
                <div class="page-sub" id="h-quote">"El √°rbol m√°s fuerte creci√≥ del suelo m√°s oscuro."</div>
            </div>

            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin:16px 14px;">
                <div class="fin-box" style="text-align:center;">
                    <div class="fin-box-val" id="s-hab">0/8</div>
                    <div class="fin-box-lbl">H√ÅBITOS</div>
                </div>
                <div class="fin-box" style="text-align:center;">
                    <div class="fin-box-val" id="s-str">0</div>
                    <div class="fin-box-lbl">RACHA</div>
                </div>
                <div class="fin-box" style="text-align:center;">
                    <div class="fin-box-val" id="s-vic">0</div>
                    <div class="fin-box-lbl">VICTORIAS</div>
                </div>
            </div>

            <div class="card"
                style="background:var(--card2);border-color:var(--border2);display:flex;gap:12px;align-items:center;">
                <div style="font-size:24px;">üë∂</div>
                <div class="serif-italic" style="font-size:14px;line-height:1.4;color:var(--white);" id="motivator-txt">
                    Tu hijo est√° mirando. No al que eres hoy ‚Äî al que est√°s eligiendo ser.</div>
            </div>

            <div class="card">
                <div class="card-title">‚è± TU D√çA HOY</div>
                <div id="day-grid">
                    <!-- Static grid for now, dynamic later if needed -->
                    <div
                        style="display:flex;gap:12px;margin-bottom:16px;border-bottom:1px solid var(--border);padding-bottom:16px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            06:30</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üêï Perros
                                + beb√©</div>
                            <div style="font-size:13px;color:var(--muted);">Paseo ¬∑ Biber√≥n ¬∑ Guarder√≠a</div>
                        </div>
                    </div>
                    <div
                        style="display:flex;gap:12px;margin-bottom:16px;border-bottom:1px solid var(--border);padding-bottom:16px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            08:30</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üí§ A
                                dormir</div>
                            <div style="font-size:13px;color:var(--muted);">6,5h m√≠nimo ¬∑ Sin m√≥vil en cama</div>
                        </div>
                    </div>
                    <div
                        style="display:flex;gap:12px;margin-bottom:16px;border-bottom:1px solid var(--border);padding-bottom:16px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            15:00</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üî•
                                Despertar</div>
                            <div style="font-size:13px;color:var(--muted);">Ritual 10 min ¬∑ Perros ¬∑ Intenci√≥n</div>
                        </div>
                    </div>
                    <div
                        style="display:flex;gap:12px;margin-bottom:16px;border-bottom:1px solid var(--border);padding-bottom:16px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            15:30</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üíª Bloque
                                productivo</div>
                            <div style="font-size:13px;color:var(--muted);">IA ¬∑ Automatizaciones ¬∑ Roadmap</div>
                        </div>
                    </div>
                    <div
                        style="display:flex;gap:12px;margin-bottom:16px;border-bottom:1px solid var(--border);padding-bottom:16px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            16:30</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üë®üë©üëß
                                Beb√© + familia</div>
                            <div style="font-size:13px;color:var(--muted);">Presente de verdad ¬∑ Ejercicio</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:12px;">
                        <div
                            style="font-family:'Bebas Neue';color:var(--gold);font-size:16px;width:45px;padding-top:3px;">
                            21:30</div>
                        <div>
                            <div style="font-weight:500;font-size:15px;color:var(--white);margin-bottom:4px;">üåô Jornada
                                nocturna</div>
                            <div style="font-size:13px;color:var(--muted);">Formaci√≥n ¬∑ Espiritualidad ¬∑ Trading</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 2: H√ÅBITOS ================= -->
        <div class="screen" id="s-habitos">
            <div class="page-header">
                <div class="page-tag">Disciplina diaria</div>
                <div class="page-title">H√ÅBITOS</div>
            </div>
            <!-- (Empty hooks for JS populated content if needed, for brevity using static placeholder or JS logic same as V1 but simplified) -->
            <div class="card">
                <div class="card-title">EN CONSTRUCCI√ìN (Usar l√≥gica JS V1 para esto)</div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 4: FINANZAS ================= -->
        <div class="screen" id="s-finanzas">
            <div class="page-header">
                <div class="page-tag">Control financiero</div>
                <div class="page-title">FINANZAS</div>
                <div class="page-sub">Lo que no mides, no puedes mejorar</div>
            </div>
            <div class="fin-grid">
                <div class="fin-box fin-wide">
                    <div class="fin-box-lbl">üí∞ Ahorrado este mes</div>
                    <div class="fin-box-val" style="color:var(--green)" id="fin-saved">0 ‚Ç¨</div>
                    <div class="prog-label" style="margin-top:10px;"><span id="fin-pct">0% del objetivo</span><span
                            id="fin-goal-lbl">Meta: 300 ‚Ç¨</span></div>
                    <div class="prog-bar">
                        <div class="prog-fill" id="fin-bar" style="width:0%"></div>
                    </div>
                </div>
                <div class="fin-box">
                    <div class="fin-box-lbl">üì§ Gastos mes</div>
                    <div class="fin-box-val" style="color:var(--red)" id="fin-spent">0 ‚Ç¨</div>
                    <div style="font-size:9px;color:var(--muted2);margin-top:2px;">Este mes</div>
                </div>
                <div class="fin-box">
                    <div class="fin-box-lbl">üì• Ingresos mes</div>
                    <div class="fin-box-val" style="color:var(--gold)" id="fin-income">0 ‚Ç¨</div>
                    <div style="font-size:9px;color:var(--muted2);margin-top:2px;">Este mes</div>
                </div>
            </div>
            <div class="card">
                <div class="card-title">‚ûï A√ëADIR MOVIMIENTO</div>
                <div style="display:flex;gap:7px;margin-bottom:8px;">
                    <button class="cpill active" id="btn-g" onclick="setTxType('gasto')"
                        style="flex:1;text-align:center;">üì§ Gasto</button>
                    <button class="cpill" id="btn-i" onclick="setTxType('ingreso')" style="flex:1;text-align:center;">üì•
                        Ingreso</button>
                </div>
                <input class="inp" id="tx-desc" placeholder="Descripci√≥n (ej: Compra mercadona)"
                    style="margin-bottom:8px;">
                <input class="inp" id="tx-amt" type="number" placeholder="Importe en ‚Ç¨" inputmode="decimal"
                    style="margin-bottom:8px;">
                <div class="cat-pills" id="cat-pills">
                    <button class="cpill active" onclick="setCat(this,'üè† Casa')">üè† Casa</button>
                    <button class="cpill" onclick="setCat(this,'üçî Comida')">üçî Comida</button>
                    <button class="cpill" onclick="setCat(this,'üöó Transporte')">üöó Trans.</button>
                    <button class="cpill" onclick="setCat(this,'üíä Salud')">üíä Salud</button>
                    <button class="cpill" onclick="setCat(this,'üìö Formaci√≥n')">üìö Form.</button>
                    <button class="cpill" onclick="setCat(this,'üí∞ Ahorro')">üí∞ Ahorro</button>
                    <button class="cpill" onclick="setCat(this,'üéØ Negocio')">üéØ Negocio</button>
                    <button class="cpill" onclick="setCat(this,'üì¶ Otros')">üì¶ Otros</button>
                </div>
                <button class="btn" onclick="addTx()">REGISTRAR MOVIMIENTO</button>
            </div>
            <div class="card">
                <div class="card-title">üéØ OBJETIVO DE AHORRO</div>
                <div style="display:flex;gap:8px;">
                    <input class="inp" id="goal-inp" type="number" placeholder="Meta en ‚Ç¨" inputmode="decimal"
                        style="flex:1">
                    <button class="btn" style="width:auto;padding:0 18px;margin:0;" onclick="setGoal()">GUARDAR</button>
                </div>
            </div>
            <div class="card">
                <div class="card-title">üë®üè´ CONSEJOS DEL MENTOR</div>
                <div class="mentor-tip">
                    <div class="mentor-tip-src">Robert Kiyosaki</div>
                    <div class="mentor-tip-text">"P√°gate a ti primero. Antes de pagar cualquier factura, aparta un %
                        fijo para ti."</div>
                </div>
                <div class="mentor-tip">
                    <div class="mentor-tip-src">Ramit Sethi</div>
                    <div class="mentor-tip-text">"Automatiza tus ahorros. Si tienes que decidirlo cada mes, fallar√°s."
                    </div>
                </div>
                <textarea class="inp" id="mentor-inp" style="min-height:65px;margin-top:8px;"
                    placeholder="A√±ade tu propio consejo..."></textarea>
                <button class="btn" onclick="addMentor()">GUARDAR CONSEJO</button>
            </div>
            <div class="card">
                <div class="card-title">üìã HISTORIAL ‚Äî ESTE MES</div>
                <div id="tx-list">
                    <div style="text-align:center;padding:20px;color:var(--muted);font-size:13px;">Sin movimientos
                        todav√≠a.<br>A√±ade tu primer registro arriba.</div>
                </div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 5: DIARIO ================= -->
        <div class="screen" id="s-diario">
            <div class="page-header">
                <div class="page-tag">Crecimiento personal</div>
                <div class="page-title">DIARIO</div>
                <div class="page-sub">El que escribe, se conoce</div>
            </div>
            <div
                style="display:flex;gap:0;margin:12px 14px 0;border:1px solid var(--border2);border-radius:12px;overflow:hidden;">
                <button id="tab-w" onclick="setTab('w')"
                    style="flex:1;padding:12px;border:none;font-family:'Bebas Neue';font-size:13px;letter-spacing:2px;cursor:pointer;background:var(--gold);color:#000;">‚úçÔ∏è
                    ESCRIBIR</button>
                <button id="tab-t" onclick="setTab('t')"
                    style="flex:1;padding:12px;border:none;font-family:'Bebas Neue';font-size:13px;letter-spacing:2px;cursor:pointer;background:var(--card);color:var(--muted);">üìä
                    TRACKLIST</button>
            </div>
            <div id="panel-w">
                <div class="card" style="margin-top:12px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                        <div>
                            <div style="font-family:'Bebas Neue';font-size:22px;letter-spacing:2px;color:var(--gold);"
                                id="j-date">HOY</div>
                            <div style="font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--muted);"
                                id="j-dow"></div>
                        </div>
                        <div style="font-size:11px;color:var(--muted);" id="j-time"></div>
                    </div>
                    <div
                        style="font-family:'Bebas Neue';font-size:11px;letter-spacing:2px;color:var(--muted);margin-bottom:8px;">
                        üò∂ ¬øC√ìMO LLEGAS HOY?</div>
                    <div style="display:flex;gap:7px;">
                        <button
                            style="flex:1;padding:9px 4px;border-radius:12px;border:1px solid var(--border2);background:none;cursor:pointer;font-size:19px;text-align:center;"
                            onclick="setMood(this,'üò§')">üò§</button>
                        <button
                            style="flex:1;padding:9px 4px;border-radius:12px;border:1px solid var(--border2);background:none;cursor:pointer;font-size:19px;text-align:center;"
                            onclick="setMood(this,'üòû')">üòû</button>
                        <button
                            style="flex:1;padding:9px 4px;border-radius:12px;border:1px solid var(--border2);background:none;cursor:pointer;font-size:19px;text-align:center;border-color:var(--gold);background:rgba(245,196,0,.1);"
                            onclick="setMood(this,'üòê')">üòê</button>
                        <button
                            style="flex:1;padding:9px 4px;border-radius:12px;border:1px solid var(--border2);background:none;cursor:pointer;font-size:19px;text-align:center;"
                            onclick="setMood(this,'üôÇ')">üôÇ</button>
                        <button
                            style="flex:1;padding:9px 4px;border-radius:12px;border:1px solid var(--border2);background:none;cursor:pointer;font-size:19px;text-align:center;"
                            onclick="setMood(this,'üî•')">üî•</button>
                    </div>
                </div>
                <div class="card" style="background:rgba(245,196,0,.04);border-color:rgba(245,196,0,.18);">
                    <div
                        style="font-family:'DM Serif Display';font-style:italic;font-size:16px;color:var(--white);line-height:1.6;margin-bottom:16px;">
                        "¬øQu√© necesito hoy para estar orgulloso de m√≠ mismo al anochecer?"</div>
                    <div style="margin-bottom:14px;">
                        <div
                            style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:6px;">
                            üéØ UNA ACCI√ìN QUE ME ACERQUE A MI META</div><textarea class="inp" id="j-accion"
                            style="min-height:70px;" placeholder="Ej: Llamar a mi amigo..."></textarea>
                    </div>
                    <div style="margin-bottom:14px;">
                        <div
                            style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:6px;">
                            üí™ UNA ACTITUD QUE VOY A SOSTENER</div><textarea class="inp" id="j-actitud"
                            style="min-height:70px;" placeholder="Ej: Paciencia..."></textarea>
                    </div>
                    <div>
                        <div
                            style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:6px;">
                            üö´ UN PENSAMIENTO QUE NO VOY A PERMITIR HOY</div><textarea class="inp" id="j-pens"
                            style="min-height:70px;" placeholder="Ej: 'Esto no va a funcionar'..."></textarea>
                    </div>
                </div>
                <div class="card">
                    <div
                        style="font-family:'Bebas Neue';font-size:11px;letter-spacing:2px;color:var(--muted);margin-bottom:12px;">
                        üìù RESUMEN COMPLETO DEL D√çA</div>
                    <textarea class="inp" id="j-resumen" style="min-height:80px;margin-bottom:10px;"
                        placeholder="Resumen general..."></textarea>
                    <button class="btn" id="save-btn" onclick="saveEntry()">üíæ GUARDAR ENTRADA DEL D√çA</button>
                </div>
                <div class="card">
                    <div
                        style="font-family:'Bebas Neue';font-size:11px;letter-spacing:2px;color:var(--muted);margin-bottom:12px;">
                        üéØ OBJETIVOS PERSONALES</div>
                    <div id="obj-list">
                        <div class="obj-item" onclick="toggleObj(this)">
                            <div class="obj-chk"></div>
                            <div class="obj-text">Leer 10 p√°ginas al d√≠a</div>
                        </div>
                        <div class="obj-item" onclick="toggleObj(this)">
                            <div class="obj-chk"></div>
                            <div class="obj-text">Hacer ejercicio 4 veces/sem</div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="panel-t" style="display:none;">
                <div class="card" style="margin-top:12px;">
                    <div
                        style="font-family:'Bebas Neue';font-size:11px;letter-spacing:2px;color:var(--muted);margin-bottom:8px;">
                        üìä TU EVOLUCI√ìN MES A MES</div>
                    <div style="font-size:13px;color:var(--muted);line-height:1.6;">Toca cualquier entrada para verla
                        completa.</div>
                </div>
                <div id="tracklist"></div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 6: RUTINA ================= -->
        <div class="screen" id="s-rutina">
            <div class="page-header">
                <div class="page-tag">Tu protocolo personal</div>
                <div class="page-title">RUTINA</div>
                <div class="page-sub">Estructura que libera, no que esclaviza</div>
            </div>
            <div class="rblock open" onclick="toggleBlock(this)" style="margin-top:12px;">
                <div class="rblock-hdr">
                    <div class="rblock-emoji">üåÖ</div>
                    <div style="flex:1;">
                        <div class="rblock-title">LLEGADA A CASA</div>
                        <div class="rblock-time">06:30 ‚Äì 08:30h</div>
                    </div>
                    <div class="rblock-arrow">‚ñº</div>
                </div>
                <div class="rblock-body">
                    <div class="rstep">
                        <div class="rstep-num">1</div>
                        <div>
                            <div class="rstep-name">üêï Sacar los perros</div>
                            <div class="rstep-dur">15 min ¬∑ Desconexi√≥n</div>
                        </div>
                    </div>
                    <div class="rstep">
                        <div class="rstep-num">2</div>
                        <div>
                            <div class="rstep-name">üë∂ Atender al beb√©</div>
                            <div class="rstep-dur">Biber√≥n, vestirlo, guarder√≠a</div>
                        </div>
                    </div>
                    <div class="rstep">
                        <div class="rstep-num">3</div>
                        <div>
                            <div class="rstep-name">ü™• Higiene y cama</div>
                            <div class="rstep-dur">Sin m√≥vil ¬∑ Dormir antes 8:30h</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="rblock" onclick="toggleBlock(this)">
                <div class="rblock-hdr">
                    <div class="rblock-emoji">üî•</div>
                    <div style="flex:1;">
                        <div class="rblock-title">RITUAL DESPERTAR</div>
                        <div class="rblock-time">15:00 ‚Äì 15:30h</div>
                    </div>
                    <div class="rblock-arrow">‚ñº</div>
                </div>
                <div class="rblock-body">
                    <div class="rstep">
                        <div class="rstep-num">1</div>
                        <div>
                            <div class="rstep-name">‚è∞ Sin snooze</div>
                            <div class="rstep-dur">Decide.</div>
                        </div>
                    </div>
                    <div class="rstep">
                        <div class="rstep-num">2</div>
                        <div>
                            <div class="rstep-name">üíß Agua + cara</div>
                            <div class="rstep-dur">2 min</div>
                        </div>
                    </div>
                    <div class="rstep">
                        <div class="rstep-num">3</div>
                        <div>
                            <div class="rstep-name">üß† Afirmaci√≥n</div>
                            <div class="rstep-dur">2 min ¬∑ Voz alta</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="rblock" onclick="toggleBlock(this)">
                <div class="rblock-hdr">
                    <div class="rblock-emoji">üíª</div>
                    <div style="flex:1;">
                        <div class="rblock-title">BLOQUE PRODUCTIVO</div>
                        <div class="rblock-time">15:30 ‚Äì 16:30h</div>
                    </div>
                    <div class="rblock-arrow">‚ñº</div>
                </div>
                <div class="rblock-body">
                    <div class="rstep">
                        <div class="rstep-num">1</div>
                        <div>
                            <div class="rstep-name">üìµ M√≥vil modo avi√≥n</div>
                            <div class="rstep-dur">Foco total</div>
                        </div>
                    </div>
                    <div class="rstep">
                        <div class="rstep-num">2</div>
                        <div>
                            <div class="rstep-name">üíª 45 min deep work</div>
                            <div class="rstep-dur">Roadmap</div>
                        </div>
                    </div>
                </div>
            </div>
            <div
                style="font-family:'Bebas Neue';font-size:11px;letter-spacing:3px;color:var(--gold);padding:14px 14px 0;">
                üßπ LIMPIEZA SEMANAL</div>
            <div class="rblock" onclick="toggleBlock(this)">
                <div class="rblock-hdr">
                    <div class="rblock-emoji">üöø</div>
                    <div style="flex:1;">
                        <div class="rblock-title">LUNES ¬∑ Ba√±os</div>
                        <div class="rblock-time">~25 min</div>
                    </div>
                    <div class="rblock-arrow">‚ñº</div>
                </div>
                <div class="rblock-body">
                    <div class="rstep">
                        <div class="rstep-num">1</div>
                        <div>
                            <div class="rstep-name">Lavabo y espejo</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 7: ROADMAP ================= -->
        <div class="screen" id="s-roadmap">
            <div class="page-header">
                <div class="page-tag">Plan de negocio real</div>
                <div class="page-title">ROADMAP</div>
                <div class="page-sub">De 0‚Ç¨ a 1.000‚Ç¨ con IA en 30 d√≠as</div>
            </div>
            <div
                style="margin:10px 14px;background:rgba(245,196,0,.07);border:1px solid rgba(245,196,0,.25);border-radius:14px;padding:18px;text-align:center;">
                <div
                    style="font-family:'Bebas Neue';font-size:50px;letter-spacing:2px;color:var(--gold);line-height:1;">
                    1.000‚Ç¨</div>
                <div
                    style="font-size:9px;letter-spacing:3px;text-transform:uppercase;color:var(--gold);opacity:.6;margin-top:3px;">
                    Objetivo ¬∑ 30 d√≠as</div>
                <div style="font-size:12px;color:var(--muted);margin-top:7px;line-height:1.5;">Automatizaciones IA ¬∑
                    LinkedIn ¬∑ 60-90 min diarios</div>
            </div>
            <div class="rphase open" onclick="togglePhase(this)" style="margin-top:8px;">
                <div class="rphase-hdr">
                    <div style="font-family:'Bebas Neue';font-size:34px;line-height:1;opacity:.15;color:var(--gold);">1
                    </div>
                    <div style="flex:1;">
                        <div style="font-family:'Bebas Neue';font-size:19px;letter-spacing:1.5px;color:var(--gold);">
                            CIMIENTOS</div>
                        <div
                            style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-top:2px;">
                            D√≠as 1‚Äì7 ¬∑ Preparar el terreno</div>
                    </div>
                    <div class="rphase-arrow">‚ñº</div>
                </div>
                <div class="rphase-body">
                    <div class="ptask">
                        <div class="ptask-day">D1‚Äì2</div>
                        <div>
                            <div class="ptask-name">Define servicio</div>
                            <div class="ptask-desc">Automatizaci√≥n WhatsApp Business para transportes.</div>
                        </div>
                    </div>
                    <div class="ptask">
                        <div class="ptask-day">D6</div>
                        <div>
                            <div class="ptask-name">Conversaci√≥n amigo</div>
                            <div class="ptask-desc">Pregunta problemas primero.</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="rphase" onclick="togglePhase(this)">
                <div class="rphase-hdr">
                    <div style="font-family:'Bebas Neue';font-size:34px;line-height:1;opacity:.15;color:var(--gold);">2
                    </div>
                    <div style="flex:1;">
                        <div style="font-family:'Bebas Neue';font-size:19px;letter-spacing:1.5px;color:var(--gold);">
                            VISIBILIDAD</div>
                        <div
                            style="font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-top:2px;">
                            D√≠as 8‚Äì15 ¬∑ Generar confianza</div>
                    </div>
                    <div class="rphase-arrow">‚ñº</div>
                </div>
                <div class="rphase-body">
                    <div class="ptask">
                        <div class="ptask-day">D8</div>
                        <div>
                            <div class="ptask-name">LinkedIn optimizado</div>
                            <div class="ptask-desc">"Ayudo a empresas a automatizar..."</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= SECCI√ìN 3, 8, 9, ... (Placeholders validos seg√∫n prompt) ================= -->
        <div class="screen" id="s-coach">
            <div class="page-header">
                <div class="page-title">COACH</div>
            </div>
            <div class="card">
                <div class="card-title">EN CONSTRUCCI√ìN</div>
            </div>
        </div>
        <div class="screen" id="s-digital">
            <div class="page-header">
                <div class="page-title">DIGITAL</div>
            </div>
            <div class="card">
                <div class="card-title">EN CONSTRUCCI√ìN</div>
            </div>
        </div>
        <div class="screen" id="s-fe">
            <div class="page-header">
                <div class="page-title">INTERIOR</div>
            </div>
            <div class="card">
                <div class="card-title">EN CONSTRUCCI√ìN</div>
            </div>
        </div>

    </div>

    <!-- NAV -->
    <nav>
        <button class="nav-btn active" onclick="go('home',this)"><span class="nav-icon">üè†</span><span
                class="nav-lbl">INICIO</span></button>
        <button class="nav-btn" onclick="go('habitos',this)"><span class="nav-icon">‚úÖ</span><span
                class="nav-lbl">H√ÅBITOS</span></button>
        <button class="nav-btn" onclick="go('coach',this)"><span class="nav-icon">ü§ñ</span><span
                class="nav-lbl">COACH</span></button>
        <button class="nav-btn" onclick="go('finanzas',this)"><span class="nav-icon">üí∞</span><span
                class="nav-lbl">FINANZAS</span></button>
        <button class="nav-btn" onclick="go('diario',this)"><span class="nav-icon">üìì</span><span
                class="nav-lbl">DIARIO</span></button>
        <button class="nav-btn" onclick="go('rutina',this)"><span class="nav-icon">‚è±</span><span
                class="nav-lbl">RUTINA</span></button>
        <button class="nav-btn" onclick="go('roadmap',this)"><span class="nav-icon">üöÄ</span><span
                class="nav-lbl">ROADMAP</span></button>
        <button class="nav-btn" onclick="go('digital',this)"><span class="nav-icon">üìµ</span><span
                class="nav-lbl">DIGITAL</span></button>
        <button class="nav-btn" onclick="go('fe',this)"><span class="nav-icon">‚ú®</span><span
                class="nav-lbl">INTERIOR</span></button>
    </nav>

    <script>
        // ==== DATA ====
        var txs = [], txType = 'gasto', txCat = 'üè† Casa', goalAmt = 300;
        var finArchive = [];
        var currentMood = 'üòê';
        var journalEntries = [];

        // ==== NAVIGATION ====
        function go(s, btn) {
            var screens = document.querySelectorAll('.screen');
            for (var i = 0; i < screens.length; i++) screens[i].classList.remove('active');
            var btns = document.querySelectorAll('.nav-btn');
            for (var i = 0; i < btns.length; i++) btns[i].classList.remove('active');
            document.getElementById('s-' + s).classList.add('active');
            if (btn) btn.classList.add('active');
            document.getElementById('s-' + s).scrollTop = 0;
        }
        function toggleBlock(b) { b.classList.toggle('open'); }
        function togglePhase(b) { b.classList.toggle('open'); }
        function toggleObj(el) {
            el.classList.toggle('done');
            saveData();
        }

        // ==== FINANZAS JS ====
        function setTxType(t) {
            txType = t;
            document.getElementById('btn-g').className = 'cpill' + (t === 'gasto' ? ' active' : '');
            document.getElementById('btn-i').className = 'cpill' + (t === 'ingreso' ? ' active' : '');
        }
        function setCat(btn, c) {
            txCat = c;
            var btns = document.querySelectorAll('#cat-pills .cpill');
            for (var i = 0; i < btns.length; i++) btns[i].classList.remove('active');
            btn.classList.add('active');
        }
        function addTx() {
            var desc = document.getElementById('tx-desc').value.trim();
            var amt = parseFloat(document.getElementById('tx-amt').value);
            if (!desc || !amt || amt <= 0) return;
            var now = new Date();
            txs.unshift({
                desc: desc, amt: amt, type: txType, cat: txCat,
                date: now.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' }),
                ts: now.getTime()
            });
            document.getElementById('tx-desc').value = '';
            document.getElementById('tx-amt').value = '';
            updateFin();
            saveData();
        }
        function setGoal() {
            var v = parseFloat(document.getElementById('goal-inp').value);
            if (v > 0) { goalAmt = v; updateFin(); saveData(); }
        }
        function addMentor() {
            var v = document.getElementById('mentor-inp').value.trim(); if (!v) return;
            var el = document.createElement('div'); el.className = 'mentor-tip';
            el.innerHTML = '<div class="mentor-tip-src">Mi mentor</div><div class="mentor-tip-text">' + v + '</div>';
            document.getElementById('mentor-inp').before(el);
            document.getElementById('mentor-inp').value = '';
        }
        function updateFin() {
            var income = 0; var spent = 0; var saved = 0;
            for (var i = 0; i < txs.length; i++) {
                if (txs[i].type === 'ingreso') income += txs[i].amt;
                if (txs[i].type === 'gasto') spent += txs[i].amt;
                if (txs[i].cat === 'üí∞ Ahorro' && txs[i].type === 'ingreso') saved += txs[i].amt;
            }
            var pct = Math.min(100, Math.round(saved / goalAmt * 100));
            document.getElementById('fin-income').textContent = income.toFixed(2) + ' ‚Ç¨';
            document.getElementById('fin-spent').textContent = spent.toFixed(2) + ' ‚Ç¨';
            document.getElementById('fin-saved').textContent = saved.toFixed(2) + ' ‚Ç¨';
            document.getElementById('fin-pct').textContent = pct + '% del objetivo';
            document.getElementById('fin-goal-lbl').textContent = 'Meta: ' + goalAmt + ' ‚Ç¨';
            document.getElementById('fin-bar').style.width = pct + '%';

            var list = document.getElementById('tx-list');
            if (!txs.length) {
                list.innerHTML = '<div style="text-align:center;padding:20px;color:var(--muted);font-size:13px;">Sin movimientos todav√≠a.</div>';
                return;
            }
            var html = '';
            for (var i = 0; i < Math.min(txs.length, 20); i++) {
                var t = txs[i];
                html += '<div style="display:flex;align-items:center;gap:11px;padding:11px 0;border-bottom:1px solid var(--border);">' +
                    '<div style="width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:15px;flex-shrink:0;background:' + (t.type === 'ingreso' ? 'rgba(90,170,122,.12)' : 'rgba(231,76,60,.1)') + '">' + (t.type === 'ingreso' ? 'üì•' : 'üì§') + '</div>' +
                    '<div style="flex:1;min-width:0;"><div style="font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">' + t.cat + ' ¬∑ ' + t.desc + '</div><div style="font-size:10px;color:var(--muted2);margin-top:1px;">' + t.date + '</div></div>' +
                    '<div style="font-family:Bebas Neue;font-size:18px;white-space:nowrap;color:' + (t.type === 'ingreso' ? 'var(--green)' : 'var(--red)') + '">' + (t.type === 'ingreso' ? '+' : '-') + t.amt.toFixed(2) + '‚Ç¨</div></div>';
            }
            list.innerHTML = html;
        }

        // ==== DIARIO JS ====
        function setTab(t) {
            document.getElementById('panel-w').style.display = t === 'w' ? 'block' : 'none';
            document.getElementById('panel-t').style.display = t === 't' ? 'block' : 'none';
            document.getElementById('tab-w').style.background = t === 'w' ? 'var(--gold)' : 'var(--card)';
            document.getElementById('tab-w').style.color = t === 'w' ? '#000' : 'var(--muted)';
            document.getElementById('tab-t').style.background = t === 't' ? 'var(--gold)' : 'var(--card)';
            document.getElementById('tab-t').style.color = t === 't' ? '#000' : 'var(--muted)';
        }
        function setMood(btn, m) {
            currentMood = m;
            var btns = btn.parentNode.children;
            for (var i = 0; i < btns.length; i++) {
                btns[i].style.borderColor = 'var(--border2)';
                btns[i].style.background = 'none';
            }
            btn.style.borderColor = 'var(--gold)';
            btn.style.background = 'rgba(245,196,0,.1)';
        }
        function saveEntry() {
            var now = new Date();
            var e = {
                date: now.toLocaleDateString(),
                mood: currentMood,
                action: document.getElementById('j-accion').value,
                attitude: document.getElementById('j-actitud').value
            };
            journalEntries.push(e);
            saveData();
            var btn = document.getElementById('save-btn');
            var og = btn.textContent;
            btn.textContent = '‚úÖ GUARDADO';
            btn.style.background = 'var(--green)';
            setTimeout(function () { btn.textContent = og; btn.style.background = 'var(--gold)'; }, 2000);
        }

        // ==== PERSISTENCE ====
        function saveData() {
            var data = { txs: txs, goalAmt: goalAmt, journal: journalEntries };
            localStorage.setItem('tr3c3_os_v2', JSON.stringify(data));
        }
        function loadData() {
            var d = localStorage.getItem('tr3c3_os_v2');
            if (d) {
                d = JSON.parse(d);
                txs = d.txs || [];
                goalAmt = d.goalAmt || 300;
                journalEntries = d.journal || [];
                updateFin();
            }
        }

        // ==== INIT ====
        window.onload = function () {
            loadData();
            var now = new Date();
            var days = ['DO', 'LU', 'MA', 'MI', 'JU', 'VI', 'SA'];
            var months = ['ENE', 'FEB', 'MAR', 'ABR', 'MAY', 'JUN', 'JUL', 'AGO', 'SEP', 'OCT', 'NOV', 'DIC'];
            document.getElementById('h-date').textContent = days[now.getDay()] + ' ' + now.getDate() + ' ' + months[now.getMonth()];

            // SW
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js').catch(function () { });
            }
        };
    </script>
</body>

</html>